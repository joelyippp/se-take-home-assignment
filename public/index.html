<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mcd panel</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    #orderList {
      border: 1px solid #ccc;
      padding: 10px;
      margin-top: 20px;
    }
    .order {
      padding: 5px;
      border-bottom: 1px solid #ddd;
    }
    #botList {
      border: 1px solid #ccc;
      padding: 10px;
      margin-top: 20px;
    }
    .bot {
      padding: 5px;
      border-bottom: 1px solid #ddd;
    }
  </style>
</head>
<body>
  <h1>Live Orders</h1>
  <div id="orderList"></div>
  <div id="botList"></div>

  <script>
    async function fetchThings() {
      fetchOrders()
      fetchBots() 
    }

    async function fetchOrders() {
      try {
        const response = await fetch('http://localhost:3000/orders'); // Endpoint to fetch orders
        if (!response.ok) {
          throw new Error('Failed to fetch orders')
        }
        const orders = await response.json()

        const orderListDiv = document.getElementById('orderList')
        orderListDiv.innerHTML = ''
        orders.forEach(order => {
          const orderDiv = document.createElement('div')
          orderDiv.className = 'order'
          orderDiv.textContent = `Order ID: ${order.id}, Item: ${order.item}, Status: ${order.status}`
          orderListDiv.appendChild(orderDiv)
        })
      } catch (error) {
        console.error('Error fetching orders:', error)
      }
    }
    async function fetchBots() {
      try {
        const response = await fetch('http://localhost:3000/bots')
        if (!response.ok) {
          throw new Error('Failed to fetch bots')
        }
        const bots = await response.json()

        const botListDiv = document.getElementById('botList')
        botListDiv.innerHTML = ''
        bots.forEach(bot => {
          const botDiv = document.createElement('div')
          botDiv.className = 'bot'
          botDiv.textContent = `bot ID: ${bot.id}, bot processing: ${bot.isProcessing}`
          botListDiv.appendChild(botDiv)
        })
      } catch (error) {
        console.error('Error fetching bots:', error)
      }
    }
    setInterval(fetchThings, 500)
    fetchThings()
  </script>
</body>
</html>